name: ðŸš€ Build and deploy to hostinger
on:
  push:
    branches: [master]
  pull_request:
    branches: [master]
  workflow_dispatch:
jobs:
  build_and_deploy_to_hostinger:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      # Runs a single command using the runners shell
      - name: Install dependencies
        run: npm install
      - name: Build with npm
        run: npm run build
      - name: debugging
        run: ls

      # Runs a set of commands using the runners shell
      - name: FTP Deploy
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ftp.larshansen.dev
          username: ${{ secrets.HOSTINGER_FTP_USERNAME }}
          password: ${{ secrets.HOSTINGER_FTP_PASSWORD }}
          #port: 21
          #protocol: ftps

          local-dir: ./build/
          server-dir: ./public_html/
          # Path and name of the state file - this file is used to track which files have been deployed
          #state-name: # optional
          dry-run: true
          # An array of glob patterns, these files will not be included in the publish/delete process
          exclude: .git*/**
            - node_modules/**
            - node_modules/**/*
          # warn, standard, verbose
          log-level: verbose
